<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Control de Pestañas</title>
<script>
  // Guardamos todas las pestañas abiertas por script
  if (!window.tabs) window.tabs = [];

  // Función para abrir nueva pestaña y guardarla
  function abrirNueva() {
    const nueva = window.open(window.location.href, "_blank");
    if (nueva) window.tabs.push(nueva);
  }

  // Función para cerrar todas menos la actual
  function cerrarOtras() {
    window.tabs = window.tabs.filter(t => {
      if (!t.closed && t !== window) {
        try { t.close(); } catch(e) { console.log("No se pudo cerrar", t); }
      }
      return false;
    });
  }

  // Auto-ejemplo: abrir 3 pestañas al cargar
  window.onload = () => {
    // Solo abrir si es la pestaña principal
    if (!sessionStorage.getItem("iniciado")) {
      sessionStorage.setItem("iniciado", "1");
      abrirNueva();
      abrirNueva();
      abrirNueva();
    }
  }
</script>
</head>

<body>
  <h1>Control de pestañas desde la raíz</h1>
  <button onclick="abrirNueva()">Abrir nueva pestaña</button>
  <button onclick="cerrarOtras()">Cerrar otras pestañas</button>
  <p>Esta pestaña puede cerrar automáticamente todas las hijas que fueron abiertas por script. v0.2</p>
</body>
</html>
