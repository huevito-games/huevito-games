<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>v0.1</title>
</head>
<body>

<iframe
  id="miIframe"
  src="https://huevitohosting.wixsite.com/huevito-gamess"
  width="100%"
  height="600"
  style="border:none;"
></iframe>

<script>
// Obtener el iframe
const iframe = document.getElementById("miIframe");

// Escuchar mensajes del iframe (cross-origin seguro)
window.addEventListener("message", (event) => {
  try {
    // Solo procesamos mensajes de wixsite.com
    if (!event.origin.includes("wixsite.com")) return;

    // Obtener la URL enviada por el iframe
    const iframeURL = event.data;

    // Separar la URL
    const urlObj = new URL(iframeURL);
    const pathSegments = urlObj.pathname.split("/").filter(Boolean);
    const lastPart = pathSegments.pop(); // Tomar última parte de la ruta

    if (lastPart) {
      // Redirigir la página principal al mismo dominio, con el último segmento del iframe
      const nuevaURL = window.location.origin + "/" + lastPart;
      window.location.href = nuevaURL;
    }
  } catch (e) {
    console.error("Error al procesar el mensaje del iframe:", e);
  }
});
</script>

</body>
</html>
