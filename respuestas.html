<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Respuestas del Formulario</title>
</head>
<body>
  <h1>Respuestas del Formulario</h1>

  <div id="loginDiv">
    <input type="password" id="password" placeholder="Contraseña">
    <button id="loginBtn">Acceder</button>
  </div>

  <div id="respuestasDiv" style="display:none;">
    <ul id="respuestas"></ul>
  </div>

  <script>
    const loginBtn = document.getElementById('loginBtn');
    const passwordInput = document.getElementById('password');
    const loginDiv = document.getElementById('loginDiv');
    const respuestasDiv = document.getElementById('respuestasDiv');
    const lista = document.getElementById('respuestas');

    const CONTRASEÑA = 'miSecreta123'; // Cambia por tu contraseña
    const BIN_URL = 'TU_BIN_URL';       // Reemplaza con la URL de tu bin JSONBin
    const API_KEY = 'TU_API_KEY';       // Reemplaza con tu API Key de JSONBin

    loginBtn.addEventListener('click', async () => {
      if (passwordInput.value === CONTRASEÑA) {
        loginDiv.style.display = 'none';
        respuestasDiv.style.display = 'block';

        try {
          const res = await fetch(BIN_URL + '/latest', {
            headers: { 'X-Master-Key': API_KEY }
          });
          const data = await res.json();

          data.forEach(r => {
            // Ignorar el primer registro inicial vacío si existe
            if(!r.Nombre && !r.Email && !r.Mensaje) return;

            const li = document.createElement('li');
            li.textContent = `${r.Nombre} - ${r.Email}: ${r.Mensaje} (${r.Fecha})`;
            lista.appendChild(li);
          });

        } catch(err) {
          lista.innerHTML = '<li>❌ Error al cargar las respuestas</li>';
          console.error(err);
        }

      } else {
        alert('Contraseña incorrecta');
      }
    });
  </script>
</body>
</html>
