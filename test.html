<!DOCTYPE html>
<html>
<head>
  <title>Control de pestañas</title>
</head>
<body>

<button onclick="abrirNueva()">Abrir nueva pestaña</button>
<button onclick="cerrarOtras()">Cerrar otras pestañas</button>

<script>
  const TAB_ID = Date.now() + Math.random();

  // Registrar esta pestaña
  let tabs = JSON.parse(localStorage.getItem("tabs") || "[]");
  tabs.push(TAB_ID);
  localStorage.setItem("tabs", JSON.stringify(tabs));

  // Abrir nueva pestaña
  function abrirNueva() {
    window.open(window.location.href, "_blank");
  }

  // Escuchar cambios en localStorage
  window.addEventListener("storage", function(event) {
    if (event.key === "cerrarTodo") {
      const idMantener = event.newValue;
      if (TAB_ID != idMantener) {
        window.close();
      }
    }
  });

  // Cerrar otras pestañas
  function cerrarOtras() {
    localStorage.setItem("cerrarTodo", TAB_ID);
  }
</script>

</body>
</html>
